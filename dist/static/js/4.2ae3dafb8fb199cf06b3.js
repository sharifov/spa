(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"6xHI":function(n,t,e){"use strict";e.r(t);var s=(e("qZNF"),e("KHd+")),a=Object(s.a)({computed:{user:function(){return this.$store.state.user},orders:function(){return this.$store.state.eps.orders},payments:function(){return this.$store.state.payments.payments}},mounted:function(){this.$store.dispatch("eps/GetOrders",this.user.profile_id),this.$store.dispatch("payments/GetPayments",this.user.profile_id),this.$store.dispatch("GetPaymentsSettings")},methods:{DownloadCard:function(n,t){this.$store.dispatch("DownloadFile",{url:"/catalog/api-v3/cards/download-blob",data:{profile_id:this.user.profile_id,ms_order_id:n.ms_order_id,ms_card_id:t.ms_card_id},filename:"".concat(t.type,"_").concat(t.nominal,".pdf")})},DownloadCards:function(n,t){var e=[];t&&(e=t.map(function(n){return n.ms_card_id})),this.$store.dispatch("DownloadFile",{url:"/profiles/api/cards/download-blob-cards",data:{profile_id:this.user.profile_id,ms_order_id:n.ms_order_id,ms_card_ids:e},filename:"".concat(t[0].type,"_").concat(t[0].nominal,".zip")})}}},function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-container",{staticStyle:{height:"100%"},attrs:{fluid:"","pa-0":""}},[e("v-layout",{attrs:{max:"",row:"",wrap:""}},[e("v-flex",{staticClass:"title-page",attrs:{xs12:""}},[e("div",{staticClass:"title-background"}),n._v("\n      Заказы\n    ")])],1),n._v(" "),e("v-tabs",{attrs:{"fixed-tabs":"","slider-color":"#fbcb30"}},[e("v-tab",[n._v("Сертификаты")]),n._v(" "),e("v-tab-item",[e("v-layout",{staticClass:"orders",attrs:{max:"",row:"",wrap:""}},[e("v-flex",{attrs:{md10:"","offset-md1":"",xs12:""}},n._l(n.orders,function(t){return e("v-layout",{key:t.ms_order_id,staticClass:"orders--block"},[e("v-flex",[e("v-layout",{staticClass:"orders--head"},[e("v-flex",[n._v("Заказ №"+n._s(t.ms_order_id))]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md1:"",xs2:""}},[n._v("Кол-во")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md1:"",xs2:""}},[n._v("Цена(руб)")])],1),n._v(" "),t.delivery_address&&t.delivery_address.length?e("div",[e("b",[n._v("Адрес доставки")]),n._v(": "+n._s(t.delivery_address)+"\n              ")]):n._e(),n._v(" "),n._l(t.items,function(s){return e("div",[e("v-layout",{staticClass:"orders--wrap",attrs:{row:"",wrap:""}},[e("v-flex",[e("span",[n._v(n._s(s.card_title)+" "+n._s(s.nominal))])]),n._v(" "),e("v-flex",{attrs:{md1:"",xs2:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(s.qty))])]),n._v(" "),e("v-flex",{attrs:{md1:"",xs2:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(s.nominal*t.coeff))])])],1),n._v(" "),t&&t.items&&1<t.items.length?e("v-layout",{staticClass:"orders--footer",attrs:{row:"",wrap:""}},[e("v-flex",[n._v("Итого:")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md1:"",xs2:""}},[n._v(n._s(s.qty*s.nominal*t.coeff))])],1):e("v-layout",{staticClass:"orders--footer",attrs:{row:"",wrap:""}},[e("v-flex",[n._v("Итоговая сумма заказа:")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md1:"",xs2:""}},[n._v(n._s(t.amount))])],1),n._v(" "),e("v-layout",{staticClass:"justify-end"},[e("v-flex",{staticClass:"justify-end display-flex download_cont",attrs:{lg6:"",md8:"",sm12:"",xs12:""}},[s.cards&&1==s.cards.length?[e("v-btn",{staticClass:"iek-btn ma-0",on:{click:function(e){return n.DownloadCard(t,s.cards[0])}}},[n._v("\n                        Получить сертификат\n                      ")])]:s.cards&&1<s.cards.length?[e("v-btn",{staticClass:"iek-btn ma-0",on:{click:function(e){return n.DownloadCards(t,s.cards)}}},[n._v("\n                        Получить сертификат\n                      ")])]:e("v-btn",{staticClass:"iek-btn ma-0",attrs:{disabled:""}},[n._v(n._s(s.status_label))])],2)],1)],1)}),n._v(" "),t&&t.items&&1<t.items.length?e("v-layout",{staticClass:"orders--footer mt-4",attrs:{row:"",wrap:""}},[e("v-flex",[n._v("Итоговая сумма заказа:")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md1:"",xs2:""}},[n._v(n._s(t.amount))])],1):n._e()],2)],1)}),1)],1)],1),n._v(" "),e("v-tab",[n._v("Платежи")]),n._v(" "),e("v-tab-item",[e("v-layout",{staticClass:"payments mt-3",attrs:{max:"",row:"",wrap:""}},[e("v-flex",{attrs:{md10:"","offset-md1":"",xs12:""}},n._l(n.payments,function(t){return e("v-layout",{key:t.ms_payment_id,staticClass:"payments--block"},[e("v-flex",[e("v-layout",{staticClass:"payments--head"},[e("v-flex",{attrs:{md3:"",xs3:""}},[n._v("Заказ №"+n._s(t.ms_payment_id))]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md2:"",xs2:""}},[n._v(n._s(t.type_label))]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md3:"",xs3:""}},[n._v("Дата платежа")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md2:"",xs2:""}},[n._v("Сумма (бонусов)")]),n._v(" "),e("v-flex",{staticClass:"center",attrs:{md2:"",xs2:""}},[n._v("Сумма (рублей)")])],1),n._v(" "),e("v-layout",{staticClass:"payments--wrap",attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md3:"",xs3:""}},[e("div",[n._v(n._s(t.status_label))])]),n._v(" "),t.parameters?e("v-flex",{attrs:{md2:"",xs2:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(t.parameters.phone_mobile))])]):n._e(),n._v(" "),e("v-flex",{attrs:{md3:"",xs3:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(t.created_at))])]),n._v(" "),e("v-flex",{attrs:{md2:"",xs2:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(t.amount))])]),n._v(" "),e("v-flex",{attrs:{md2:"",xs2:""}},[e("div",{staticClass:"sert-title center"},[n._v(n._s(t.payment_amount))])])],1)],1)],1)}),1)],1)],1)],1)],1)},[],!1,null,"7b16e808",null);t.default=a.exports},RxRA:function(n,t,e){var s=e("cT4M");"string"==typeof s&&(s=[[n.i,s,""]]),s.locals&&(n.exports=s.locals),(0,e("SZ7m").default)("e43da5f4",s,!0,{})},cT4M:function(n,t,e){(n.exports=e("I1BE")(!0)).push([n.i,"\n.icon-download[data-v-7b16e808] {\n  color: #666;\n  font-size: 32px;\n  padding-right: 6px;\n}\n.icon-download[data-v-7b16e808]:hover {\n  color: #111;\n}\n.certificate-list--wrap .sert-label[data-v-7b16e808] {\n  color: #666;\n}\n.certificate-list--wrap .sert-title[data-v-7b16e808] {\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n.certificate-list--wrap .sert-title.title-with-icon[data-v-7b16e808]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n","",{version:3,sources:["C:/wamp/www/iek/spa/src/components/C:/wamp/www/iek/spa/src/components/src/components/EpsOrders.vue","C:/wamp/www/iek/spa/src/components/EpsOrders.vue"],names:[],mappings:";AAkLA;EACA,YAAA;EACA,gBAAA;EACA,mBAAA;CCCA;ADEA;EACA,YAAA;CCCA;ADEA;EACA,YAAA;CCCA;ADEA;EACA,iBAAA;EACA,kBAAA;CCCA;ADCA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;CCQA",file:"EpsOrders.vue?vue&type=style&index=0&id=7b16e808&scoped=true&lang=css&",sourcesContent:['<template>\n  <v-container fluid pa-0 style="height: 100%">\n    <v-layout max row wrap >\n      <v-flex xs12 class="title-page">\n        <div class="title-background"></div>\n        Заказы\n      </v-flex>\n    </v-layout>\n\n    <v-tabs fixed-tabs slider-color="#fbcb30">\n      <v-tab>Сертификаты</v-tab>\n      <v-tab-item>\n        <v-layout max row wrap class="orders">\n          <v-flex md10 offset-md1 xs12>\n            <v-layout v-for="order in orders" :key="order.ms_order_id"  class="orders--block">\n              <v-flex>\n                <v-layout class="orders--head">\n                  <v-flex>Заказ №{{order.ms_order_id}}</v-flex>\n                  <v-flex md1 xs2 class="center">Кол-во</v-flex>\n                  <v-flex md1 xs2 class="center">Цена(руб)</v-flex>\n                </v-layout>\n\n                <div v-if="order.delivery_address && order.delivery_address.length">\n                  <b>Адрес доставки</b>: {{order.delivery_address}}\n                </div>\n\n                <div v-for="item in order.items">\n                  <v-layout row wrap class="orders--wrap">\n                    <v-flex>\n                      <span>{{item.card_title}} {{item.nominal}}</span>\n                    </v-flex>\n\n                    <v-flex md1 xs2>\n                      <div class="sert-title center">{{item.qty}}</div>\n                    </v-flex>\n\n                    <v-flex md1 xs2>\n                      <div class="sert-title center">{{item.nominal*order.coeff}}</div>\n                    </v-flex>\n                  </v-layout>\n\n                  <v-layout v-if="!!order && !!order.items && order.items.length > 1" row wrap class="orders--footer">\n                    <v-flex>Итого:</v-flex>\n                    <v-flex md1 xs2 class="center">{{ item.qty * item.nominal * order.coeff }}</v-flex>\n                  </v-layout>\n                  <v-layout v-else row wrap class="orders--footer">\n                    <v-flex>Итоговая сумма заказа:</v-flex>\n                    <v-flex md1 xs2 class="center">{{ order.amount }}</v-flex>\n                  </v-layout>\n\n                  <v-layout class="justify-end">\n                    <v-flex lg6 md8 sm12 xs12 class="justify-end display-flex download_cont">\n                      <template v-if="item.cards && item.cards.length == 1">\n                        <v-btn class="iek-btn ma-0" @click="DownloadCard(order, item.cards[0])">\n                          Получить сертификат\n                        </v-btn>\n                      </template>\n\n                      <template v-else-if="item.cards && item.cards.length > 1">\n                        <v-btn class="iek-btn ma-0" @click="DownloadCards(order, item.cards)">\n                          Получить сертификат\n                        </v-btn>\n                      </template>\n\n                      <v-btn v-else disabled class="iek-btn ma-0">{{item.status_label}}</v-btn>\n                    </v-flex>\n                  </v-layout>\n                </div>\n\n                <v-layout v-if="!!order && !!order.items && order.items.length > 1" row wrap class="orders--footer mt-4">\n                  <v-flex>Итоговая сумма заказа:</v-flex>\n                  <v-flex md1 xs2 class="center">{{order.amount}}</v-flex>\n                </v-layout>\n\n              </v-flex>\n            </v-layout>\n\n          </v-flex>\n        </v-layout>\n      </v-tab-item>\n\n      <v-tab>Платежи</v-tab>\n      <v-tab-item>\n        <v-layout max row wrap class="payments mt-3">\n          <v-flex md10 offset-md1 xs12>\n            <v-layout v-for="payment in payments" :key="payment.ms_payment_id"  class="payments--block">\n              <v-flex>\n                <v-layout class="payments--head">\n                  <v-flex md3 xs3>Заказ №{{payment.ms_payment_id}}</v-flex>\n                  <v-flex md2 xs2 class="center">{{ payment.type_label }}</v-flex>\n                  <v-flex md3 xs3 class="center">Дата платежа</v-flex>\n                  <v-flex md2 xs2 class="center">Сумма (бонусов)</v-flex>\n                  <v-flex md2 xs2 class="center">Сумма (рублей)</v-flex>\n                </v-layout>\n\n                <v-layout row wrap class="payments--wrap">\n                  <v-flex md3 xs3>\n                    <div>{{ payment.status_label }}</div>\n                  </v-flex>\n\n                  <v-flex md2 xs2 v-if="payment.parameters">\n                    <div class="sert-title center">{{ payment.parameters.phone_mobile }}</div>\n                  </v-flex>\n\n                  <v-flex md3 xs3>\n                    <div class="sert-title center">{{ payment.created_at }}</div>\n                  </v-flex>\n\n                  <v-flex md2 xs2>\n                    <div class="sert-title center">{{ payment.amount }}</div>\n                  </v-flex>\n\n                  <v-flex md2 xs2>\n                    <div class="sert-title center">{{ payment.payment_amount }}</div>\n                  </v-flex>\n                </v-layout>\n\n              </v-flex>\n            </v-layout>\n\n          </v-flex>\n        </v-layout>\n      </v-tab-item>\n    </v-tabs>\n  </v-container>\n</template>\n\n<script>\n  export default {\n    computed: {\n      user() {\n        return this.$store.state.user;\n      },\n      orders() {\n        return this.$store.state.eps.orders;\n      },\n      payments() {\n        return this.$store.state.payments.payments;\n      },\n    },\n    mounted() {\n      this.$store.dispatch(\'eps/GetOrders\', this.user.profile_id);\n      this.$store.dispatch(\'payments/GetPayments\', this.user.profile_id);\n      this.$store.dispatch(\'GetPaymentsSettings\');\n    },\n    methods: {\n      DownloadCard(order, card) {\n        this.$store.dispatch(\'DownloadFile\', {\n          url: \'/catalog/api-v3/cards/download-blob\',\n          data: {\n            profile_id: this.user.profile_id,\n            ms_order_id: order.ms_order_id,\n            ms_card_id: card.ms_card_id,\n          },\n          filename: `${card.type}_${card.nominal}.pdf`,\n        });\n      },\n      DownloadCards(order, cards) {\n        let ms_card_ids = [];\n        if (cards) {\n          ms_card_ids = cards.map(card => card.ms_card_id);\n        }\n\n        this.$store.dispatch(\'DownloadFile\', {\n          url: \'/profiles/api/cards/download-blob-cards\',\n          data: {\n            profile_id: this.user.profile_id,\n            ms_order_id: order.ms_order_id,\n            ms_card_ids: ms_card_ids,\n          },\n          filename: `${cards[0].type}_${cards[0].nominal}.zip`,\n        });\n      },\n    },\n  };\n<\/script>\n\n<style scoped>\n  .icon-download {\n    color: #666;\n    font-size: 32px;\n    padding-right: 6px;\n  }\n\n  .icon-download:hover {\n    color: #111;\n  }\n\n  .certificate-list--wrap .sert-label {\n    color: #666;\n  }\n\n  .certificate-list--wrap .sert-title {\n    font-weight: 600;\n    font-size: 1.1rem;\n  }\n  .certificate-list--wrap .sert-title.title-with-icon{\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n  }\n</style>\n',"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.icon-download {\n  color: #666;\n  font-size: 32px;\n  padding-right: 6px;\n}\n\n.icon-download:hover {\n  color: #111;\n}\n\n.certificate-list--wrap .sert-label {\n  color: #666;\n}\n\n.certificate-list--wrap .sert-title {\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n.certificate-list--wrap .sert-title.title-with-icon{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n"],sourceRoot:""}])},qZNF:function(n,t,e){"use strict";var s=e("RxRA");e.n(s).a}}]);
//# sourceMappingURL=4.2ae3dafb8fb199cf06b3.js.map