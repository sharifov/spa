(window.webpackJsonp=window.webpackJsonp||[]).push([[9,16],{Bxm6:function(t,e,s){"use strict";s.r(e);var r={data:function(){var t=this;return{current:{},settings:[],paymentFinish:!1,form:{value:"",amount:"",valid:!0},taxes:{sum:"",string:""},patternNumber:/^\d{1,10}$/,patternPurse:/^\d{12,15}$/,rules:{required:function(t){return!!t||"Поле должно быть заполнено"},phoneLength:function(t){return t&&17<=t.length||"Номер телефона заполнен не полностью"},cardLength:function(t){return t&&19<=t.length||"Номер карты заполнен не полностью"},number:function(e){return t.patternNumber.test(e)||"Поле должно содержать только целые числа"},amount:function(e){return!!+e&&t.patternNumber.test(e)||"Сумма должна быть больше нуля"},purse:function(e){return t.patternPurse.test(e)||"Поле должно содержать только целые числа"}}}},computed:{user:function(){return this.$store.state.user},userGroup:function(){return this.user?this.$store.state.user.group:null},isAuthenticated:function(){return this.$store.getters.isAuthenticated},paymentsInfo:function(){return this.$store.state.paymentsInfo.methods},hasTaxes:function(){return!0===this.$store.state.settings.taxes}},methods:{GetPaymentsSettings:function(){var t=this;t.$store.getters.axl.post("api/login",{login:t.login,password:t.password}).then(function(e){t.$store.dispatch("UserLogin",e.data),t.$router.push("/dashboard")}).catch(function(e){t.$store.dispatch("HandleError",e)})},handleChangeMethod:function(t){this.current=t,this.ResetForm()},GetTaxes:function(t){if(+t){var e=this,s={profile_id:e.user.profile_id,amount:t,type:e.current.type};this.$store.getters.ax.post("payments/api-v3/payments/calculate",s).then(function(t){e.taxes={sum:parseInt(t.data.amount,10)+parseInt(t.data.commission,10)}}).catch(function(){e.taxes={sum:""}})}},paymentSubmit:function(){var t=this,e=this;if(e.form.valid){var s={profile_id:e.user.profile_id,type:e.current.type,amount:e.form.amount,parameters:{phone_mobile:e.form.value}};e.$store.getters.axl.post("payments/api-v3/payments/create",s).then(function(){e.ResetForm(),t.$store.dispatch("GetProfile"),e.paymentFinish=!0}).catch(function(t){e.$store.dispatch("HandleError",t)})}},ResetForm:function(){this.$refs.form.reset(),this.form.amount="",this.form.value="",this.taxes={sum:"",string:""}},DeclOfNum:function(t){var e=+t;return["балл","балла","баллов"][4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}},mounted:function(){this.current=this.paymentsInfo[0]}},a=s("KHd+"),n=Object(a.a)(r,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:"","pa-0":"","mb-5":""}},[s("v-layout",{attrs:{max:""}},[s("v-flex",{attrs:{xs12:""}},[!t.paymentFinish&&t.paymentsInfo&&t.paymentsInfo.length?s("v-card-title",{staticClass:"px-0"},[t._v("\n        Перевод на мобильный телефон:\n      ")]):t._e(),t._v(" "),t.paymentFinish?[s("v-card-title",{staticClass:"px-0"},[t._v("Перевод успешно отправлен")]),t._v(" "),s("div",[t._v("Ваш платеж принят в работу. Платеж будет обработан в ближайшее время.")]),t._v(" "),s("v-btn",{staticClass:"iek-btn auto-width",attrs:{to:"/profile-transactions"}},[t._v("Все платежи")])]:t._e()],2)],1),t._v(" "),!t.paymentFinish&&t.paymentsInfo&&t.paymentsInfo.length?s("v-layout",{staticClass:"payments",attrs:{max:"",column:"",wrap:""}},[s("div",{staticClass:"payments--types"},[t.user?s("v-layout",{staticClass:"paymentsMemu pt-0",attrs:{row:"",wrap:""}},t._l(t.paymentsInfo,function(e){return s("v-flex",{key:e.id,class:[{paymentsMemuActiveItem:e.type==t.current.type,paymentsMemuItem:!0}],attrs:{"ma-2":""},on:{click:function(s){return t.handleChangeMethod(e)}}},[s("div",{class:"ico-"+e.type+" mode"},[s("span",{staticClass:"mode-title"},[t._v(t._s(e.title))])])])}),1):t._e()],1),t._v(" "),s("div",{staticClass:"payments--number"},[s("v-form",{ref:"form",staticClass:"prizes-form",attrs:{autocomplete:"off",validation:""},model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},["yandex"===t.current.type||"webmoney"===t.current.type?s("v-text-field",{attrs:{type:"num",label:t.current.title,rules:[t.rules.required,t.rules.purse]},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}}):t._e(),t._v(" "),"rbs"===t.current.type?s("v-text-field",{attrs:{type:"text",label:t.current.title,rules:[t.rules.required,t.rules.number]},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}}):t._e(),t._v(" "),"phone"===t.current.type||"qiwi"===t.current.type?s("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-####",expression:"'+7 (###) ###-####'"}],attrs:{type:"text",label:t.current.title,rules:[t.rules.required,t.rules.phoneLength]},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}}):t._e(),t._v(" "),"card"===t.current.type?s("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"#### #### #### ####",expression:"'#### #### #### ####'"}],attrs:{type:"text",label:t.current.title,rules:[t.rules.required,t.rules.cardLength]},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}}):t._e(),t._v(" "),s("v-text-field",{attrs:{type:"number",label:"Сумма",id:"amount",min:"1",rules:[t.rules.required,t.rules.amount]},on:{input:t.GetTaxes},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),t.hasTaxes&&0<t.taxes.sum&&t.form&&0<t.form.amount?[t.userGroup&&+t.userGroup.certificates_price_coefficient?s("div",[t._v("\n          Спишется "+t._s(Math.round(t.taxes.sum*t.userGroup.certificates_price_coefficient))+"\n          "+t._s(t.DeclOfNum(Math.round(t.taxes.sum*t.userGroup.certificates_price_coefficient)))+"\n        ")]):s("div",[t._v("\n          Спишется "+t._s(t.taxes.sum)+"\n          "+t._s(t.DeclOfNum(t.taxes.sum))+"\n        ")])]:t._e(),t._v(" "),s("v-btn",{staticClass:"iek-btn",attrs:{disabled:!t.form.valid},on:{click:t.paymentSubmit}},[t._v("\n        Перевести\n      ")])],2)]):t._e()],1)},[],!1,null,null,null);e.default=n.exports},xm4N:function(t,e,s){"use strict";function r(t,e){var s=Object.keys(t);return Object.getOwnPropertySymbols&&s.push.apply(s,Object.getOwnPropertySymbols(t)),e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e);var n={components:{Payments:s("Bxm6").default},props:["type"],data:function(){return{dialogAdded:!1,cards:[],selectHints:[]}},computed:{user:function(){return this.$store.state.user},userGroup:function(){return this.user?this.$store.state.user.group:null},card:function(){return this.$store.state.eps.card},cart:function(){return this.$store.state.eps.cart},hasPayments:function(){return!0===this.$store.state.settings.payments},hasTaxes:function(){return!0===this.$store.state.settings.taxes},userHasPassport:function(){return this.user&&this.user.account&&"approved"===this.user.account.status},showCertificates:function(){return this.hasTaxes&&this.userHasPassport&&!!this.userGroup&&this.userGroup.certificates_show}},methods:{Add:function(t){void 0!==t.nominal&&t.nominal?(this.$store.dispatch("eps/AddToCart",t),this.dialogAdded=!0,t.nominal=null,t.qty=1):document.getElementById("select-card-".concat(t.id)).click()},GoToCart:function(){this.$router.push("/eps-cart")},ChangeQty:function(t,e){0<+t.target.value?e.qty=+t.target.value:e.qty=1,this.ChangeSelectHint(e)},GetDetails:function(t){this.$router.push("eps/".concat(t))},ChangeSelectHint:function(t){t.nominal&&t.qty?this.userGroup&&+this.userGroup.certificates_price_coefficient?this.selectHints[t.id]="Спишется ".concat(String(t.nominal*t.qty*this.userGroup.certificates_price_coefficient)," баллов"):this.selectHints[t.id]="Спишется ".concat(String(t.nominal*t.qty)," баллов"):this.selectHints[t.id]=""}},mounted:function(){var t=this,e=this;e.$store.dispatch("eps/GetCard",e.type),e.$store.getters.axl.post("profiles/api/cards/list",{group_id:e.user.group_id}).then(function(s){e.$store.commit("eps/SetCards",s.data.cards),e.$store.dispatch("eps/GetCard",e.type),e.cards=t.$store.state.eps.cards.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach(function(e){a(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}({},t,{qty:"1"})})})}},i=s("KHd+"),o=Object(i.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticStyle:{height:"100%"},attrs:{fluid:"","pa-0":""}},[s("v-layout",{attrs:{max:"",row:"",wrap:""}},[s("v-flex",{staticClass:"title-page",attrs:{xs12:""}},[s("div",{staticClass:"title-background"}),t._v("\n      Призы\n    ")])],1),t._v(" "),s("v-layout",{attrs:{max:"",row:"",wrap:""}},[t.hasTaxes&&!t.userHasPassport?s("v-flex",{staticClass:"cart-attention mr-3",attrs:{xs12:""}},[t._v("\n      Для заказа призов необходимо заполнить Анкету НДФЛ и дождаться подтверждения анкеты модератором сайта. "),s("br"),t._v("Срок проверки анкеты НДФЛ до 5 рабочих дней.\n      "),s("v-btn",{staticClass:"iek-btn auto-width",attrs:{to:"/passport"}},[s("i",{staticClass:"material-icons mr-1"},[t._v("assignment")]),t._v(" Заполнить")])],1):t._e()],1),t._v(" "),s("Payments",{directives:[{name:"show",rawName:"v-show",value:t.hasPayments&&t.hasTaxes&&t.userHasPassport,expression:"hasPayments && hasTaxes && userHasPassport"}]}),t._v(" "),s("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.showCertificates,expression:"showCertificates"}],staticClass:"eps-list",attrs:{max:"",row:"",wrap:""}},t._l(t.cards,function(e){return s("v-flex",{key:e.id,staticClass:"eps-list--card",attrs:{lg4:"",md4:"",sm6:"",xs12:""}},[s("v-card",{staticClass:"elevation-0"},[s("v-img",{staticClass:"eps-list--image",attrs:{src:e.image,"aspect-ratio":"1.8"},on:{click:function(s){return t.GetDetails(e.type)}}}),t._v(" "),s("v-card-actions",{staticClass:"pa-0"},[s("v-select",{staticClass:"mr-3",attrs:{items:e.nominals_text,id:"select-card-"+e.id,label:"Номинал","item-text":"nominal","item-value":"price","single-line":"",hint:t.selectHints[e.id],"persistent-hint":""},on:{change:function(s){return t.ChangeSelectHint(e)}},model:{value:e.nominal,callback:function(s){t.$set(e,"nominal",s)},expression:"card.nominal"}}),t._v(" "),s("v-text-field",{staticClass:"mr-3 eps-list--card-number",attrs:{type:"number",min:"1",max:"100",placeholder:"",required:""},on:{click:function(s){return t.ChangeQty(s,e)},keyup:function(s){return t.ChangeQty(s,e)}},model:{value:e.qty,callback:function(s){t.$set(e,"qty",s)},expression:"card.qty"}}),t._v(" "),s("v-btn",{staticClass:"eps-list--add",attrs:{disabled:!e.nominal,icon:""},on:{click:function(s){return t.Add(e)}}},[s("i",{staticClass:"material-icons"},[t._v("shopping_cart")])]),t._v(" "),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.nominal,expression:"card.nominal"}],staticClass:"eps-list--delete",attrs:{icon:""},on:{click:function(t){e.nominal="",e.qty="1"}}},[s("i",{staticClass:"material-icons"},[t._v("clear")])])],1)],1)],1)}),1)],1)},[],!1,null,null,null);e.default=o.exports}}]);
//# sourceMappingURL=9.593262270684b92a1336.js.map